# 기능 정의서: 계정 (Account)

> **원본**: [Confluence](https://bugcity.atlassian.net/wiki/spaces/BUGCITY/pages/420708354)  
> **버전**: 0.3

---

## 1. 기능 개요

사용자가 앱에 가입하고 로그인하는 기능입니다. 이메일 또는 소셜 로그인으로 인증하고, Privy를 통해 지갑이 자동 생성됩니다.

---

## 2. 핵심 플로우

```
앱 실행 → 스플래시 → 앱 소개 슬라이드 (3장) → 로그인 방식 선택 → 인증 → 약관 동의 → Privy 지갑 자동 생성 → 생체 인증 등록 → 초대 코드 입력 → 홈
```

---

## 3. 상세 스펙

### 3.1 로그인 방식

| 방식 | 지원 여부 | 비고 |
| --- | --- | --- |
| 이메일 | ✅ | 6자리 인증 코드 |
| Google | ✅ | OAuth 2.0 |
| Apple | ✅ | Sign in with Apple |
| Kakao | ❌ | Privy 미지원 |

### 3.2 앱 소개 슬라이드

| 항목 | 스펙 |
| --- | --- |
| 슬라이드 수 | 3장 |
| 네비게이션 | 스와이프 또는 [다음] 버튼 |
| 건너뛰기 | 우측 상단 "건너뛰기" 텍스트 버튼 |
| 노출 조건 | 최초 실행 시에만 (이후 자동 스킵) |

### 3.3 이메일 인증

| 항목 | 스펙 |
| --- | --- |
| 인증 코드 | 6자리 숫자 |
| 유효 시간 | 3분 |
| 재전송 쿨다운 | 60초 |
| 최대 시도 | 5회 (이후 15분 대기) |

### 3.4 생체 인증

| 항목 | 스펙 |
| --- | --- |
| iOS | Face ID / Touch ID |
| Android | 지문 / 얼굴 인식 |
| 필수 여부 | 권장 (스킵 가능) |
| 사용 시점 | 전송 확인 시 |

### 3.5 초대 코드 입력

| 상황 | 동작 |
| --- | --- |
| 딥링크 유입 | 자동 입력 → 화면 스킵 |
| 직접 유입 | 입력 화면 노출 → 입력 또는 건너뛰기 |
| 코드 오류 | 에러 표시 |

---

## 4. API

| API | 메서드 | 설명 |
| --- | --- | --- |
| /auth/privy/verify | POST | Privy 인증 토큰 검증 |
| /users/me | GET | 내 정보 조회 |
| /referral/apply | POST | 초대 코드 적용 |

---

## 5. 에러 처리

| 상황 | 처리 |
| --- | --- |
| 이메일 인증 실패 | "인증 코드가 올바르지 않습니다" |
| 로그인 취소 | 로그인 화면으로 복귀 |
| 지갑 생성 실패 | "지갑 생성에 실패했습니다. 다시 시도해주세요" |
| 초대 코드 오류 | "유효하지 않은 초대 코드입니다" |

---

## 6. QA 체크리스트

### 6.1 앱 소개 슬라이드
- [ ] 스와이프로 다음 슬라이드 이동
- [ ] [다음] 버튼으로 다음 슬라이드 이동
- [ ] [건너뛰기] 탭 시 로그인 화면으로 이동
- [ ] 재방문 시 슬라이드 스킵 확인

### 6.2 이메일 인증
- [ ] 올바른 이메일로 인증 코드 수신
- [ ] 잘못된 코드 입력 시 에러 표시
- [ ] 60초 재전송 쿨다운 동작
- [ ] 5회 실패 후 15분 대기

### 6.3 소셜 로그인
- [ ] Google 로그인 성공
- [ ] Apple 로그인 성공
- [ ] 로그인 취소 시 정상 복귀

### 6.4 초대 코드
- [ ] 딥링크 유입 시 자동 입력 + 스킵
- [ ] 유효한 코드 입력 시 정상 처리
- [ ] 유효하지 않은 코드 에러 표시
