# 냉장고 재고 관리 앱 요구사항

## 문제 (Problem)

- 냉장고에 뭐가 있는지 파악이 안 됨
- 식재료 유통기한 놓쳐서 버리는 경우 많음
- 있는 재료로 뭘 만들 수 있는지 모름
- 식사 칼로리 관리가 어려움

## 해결방법 (Solution)

영수증 기반 자동 재고 관리 + AI 레시피 추천 + 식사 사진 기반 재고/칼로리 추적

### 핵심 기능

1. **영수증 스캔** → 구매 품목 자동 등록
2. **재고 기반 레시피 추천** → "이거로 뭐 만들지?"
3. **식사 사진 업로드** → 재고 차감 + 칼로리 계산
4. **가족 공유** → 냉장고 공동 관리
5. **개인 맞춤형 추천** → 식단/신체 정보 기반 레시피 및 양 조절
6. **커뮤니티** → 라운지, 댓글, 쇼츠로 요리 경험 공유
7. **커머스 연동** → 재료 구매 링크

## 목표 (Goal)

| 목표 | 측정 기준 |
|------|----------|
| 음식물 쓰레기 감소 | 유통기한 임박 알림 후 소비율 80% |
| 재고 파악 시간 단축 | 영수증 스캔 10초 내 등록 |
| 식단 관리 | 일일 칼로리 자동 기록 |

## 지원 플랫폼

| 플랫폼 | 지원 | 비고 |
|--------|------|------|
| iOS | ✅ | 우선 개발 |
| Android | ✅ | 우선 개발 |
| 웹 | ❌ | 추후 고려 |

## 사용자 구분

| 구분 | 설명 |
|------|------|
| 가족 관리자 | 가족 그룹 생성, 멤버 초대 |
| 가족 멤버 | 재고 조회/수정, 레시피 확인, 식사 기록 |

> 1인 사용자 = 1인 가족으로 처리 (별도 로직 불필요)

## 사용자 프로필 & 개인화

### 신체 정보
| 항목 | 용도 |
|------|------|
| 키 | 적정 섭취량 계산 |
| 몸무게 | 적정 섭취량 계산 |
| 성별 | 영양소 권장량 조정 |
| 나이 | 영양소 권장량 조정 |

### 식단 선호도 (복수 선택 가능)
| 식단 유형 | 설명 | 조정 사항 |
|-----------|------|----------|
| 일반 | 제한 없음 | 기본값 |
| 당뇨 관리 | 혈당 조절 필요 | 탄수화물/당 제한, 대체 감미료 추천 |
| 다이어트 | 체중 감량 | 저칼로리 우선, 총량 조절 |
| 헬스/벌크업 | 근육 증가 | 고단백 + 적정 탄수화물 비율 |
| 키토제닉 | 저탄고지 | 탄수화물 극소화, 지방 비율 증가 |
| 비건/채식 | 식물성 식단 | 동물성 재료 제외/대체 |
| 자연주의 | 가공식품 최소화 | 첨가물 없는 재료 우선 |

### 대체 재료 변환 예시
| 원래 재료 | 대체 재료 | 적용 식단 |
|-----------|----------|----------|
| 설탕 1스푼 | 알룰로스 2스푼 | 당뇨, 키토 |
| 밀가루 100g | 아몬드가루 80g | 키토, 글루텐프리 |
| 우유 200ml | 아몬드밀크 200ml | 비건, 유당불내증 |
| 밥 1공기 | 곤약밥 1공기 | 다이어트, 키토 |

## 사용자 플로우

### Flow 1: 장보기 후 재고 등록
```
1. 앱 열기
2. "영수증 스캔" 버튼 탭
3. 영수증 촬영 또는 갤러리에서 선택
4. OCR 결과 확인 (품목, 수량, 가격, 날짜)
5. 수정할 거 있으면 수정
6. "등록" 버튼 → 재고에 추가됨
```

### Flow 2: 뭐 먹을지 고민
```
1. 앱 열기
2. "레시피 추천" 탭
3. 현재 재고 기반 추천 목록 표시
4. 레시피 선택 → 상세 보기
5. "요리 시작" 버튼 → 재고 예약 차감
```

### Flow 3: 식사 기록
```
1. 음식 완성 후 사진 촬영
2. "식사 기록" 버튼 탭
3. 사진 업로드
4. AI가 음식 인식 → 칼로리 계산
5. 사용된 재료 자동 차감 (수동 수정 가능)
6. 완료 → 식사 기록 저장
```

### Flow 4: 재고 확인
```
1. 앱 열기 → 홈에서 재고 현황 표시
2. 유통기한 임박 품목 상단 노출
3. 품목 탭 → 상세 (구매일, 남은 양, 유통기한)
4. 수동으로 수량 조정 가능
```

### Flow 5: 가족 초대
```
1. 설정 → 가족 관리
2. "멤버 초대" 버튼
3. 초대 링크 생성 → 공유
4. 수락 시 같은 냉장고 공유
```

### Flow 6: 온보딩 (첫 가입)
```
1. 소셜 로그인
2. 신체 정보 입력 (키, 몸무게, 성별, 나이)
3. 식단 선호도 선택 (당뇨/다이어트/헬스/키토 등)
4. 좋아하는 음식/레시피 선택 (넷플릭스 스타일)
   - 김치찌개 / 파스타 / 샐러드 / 스테이크 등 20개 중 5개 선택
5. 완료 → 맞춤형 홈 화면
```

### Flow 7: 맞춤형 레시피 보기
```
1. 레시피 상세 페이지 진입
2. "내 식단에 맞게 조정" 버튼 탭
3. 대체 재료 + 조정된 양 표시
   - 예: "설탕 1스푼 → 알룰로스 2스푼 (당뇨 맞춤)"
   - 예: "2인분 → 1.3인분 (내 적정량)"
4. 조정된 버전으로 요리 시작 가능
```

### Flow 8: 요리 후 피드백
```
1. 요리 완료 후 식사 기록
2. 간단 피드백 팝업
   - 맛: 😋 맛있어요 / 😐 보통이에요 / 😕 별로예요
   - 양: 🍽️ 많았어요 / ✅ 딱 좋았어요 / 🥄 적었어요
3. 다음 추천에 반영
```

### Flow 9: 라운지 (커뮤니티)
```
1. 라운지 탭 진입
2. 다른 사용자들의 요리 사진 피드
3. 좋아요 / 댓글 / 저장
4. "나도 올리기" → 사진 + 레시피 태그 + 한줄평
5. 활동에 따른 포인트 적립
```

### Flow 10: 쇼츠 보기
```
1. 쇼츠 탭 진입
2. 세로형 짧은 요리 영상 (15-60초)
3. 위로 스와이프 → 다음 영상
4. 좋아요 / 댓글 / 레시피로 이동
5. 크리에이터 팔로우
```

### Flow 11: 재료 구매
```
1. 레시피 상세에서 "재료 구매" 버튼
2. 부족한 재료 목록 표시
3. 제휴 쇼핑몰 링크로 이동
4. (선택) 장바구니 자동 담기
```

## 요구사항 체크리스트

### 재고 관리
- [ ] REQ-001: 영수증 사진 OCR로 품목/수량/가격/날짜 추출
- [ ] REQ-002: 전자 영수증 이미지 업로드 지원
- [ ] REQ-003: 수동 재고 추가/수정/삭제
- [ ] REQ-004: 유통기한 입력 및 관리
- [ ] REQ-005: 유통기한 임박 푸시 알림 (D-3, D-1)

### 레시피 추천
- [ ] REQ-006: 현재 재고 기반 레시피 추천
- [ ] REQ-007: 레시피 상세 (재료, 조리법, 예상 칼로리)
- [ ] REQ-008: "요리 시작" 시 재료 예약 차감
- [ ] REQ-009: 사용자 취향 기반 레시피 추천 (요리 히스토리 분석)
- [ ] REQ-010: 유사 레시피 추천 (김치찌개 → 된장찌개 등)

### 식사 기록
- [ ] REQ-011: 음식 사진 업로드
- [ ] REQ-012: AI 음식 인식 → 칼로리 추정
- [ ] REQ-013: 사용 재료 자동 매칭 및 재고 차감
- [ ] REQ-014: 수동 재료/칼로리 수정
- [ ] REQ-015: 요리 후 간편 피드백 (맛/양 평가 버튼)

### 개인화 & 맞춤형
- [ ] REQ-016: 신체 정보 입력 (키, 몸무게, 성별, 나이)
- [ ] REQ-017: 식단 선호도 설정 (당뇨/다이어트/헬스/키토/비건 등)
- [ ] REQ-018: 신체 정보 기반 적정 섭취량 계산
- [ ] REQ-019: 식단 유형별 대체 재료 추천 (설탕→알룰로스 등)
- [ ] REQ-020: 맞춤형 레시피 양 조절
- [ ] REQ-021: 온보딩 시 음식 취향 선택 (넷플릭스 스타일)
- [ ] REQ-022: 피드백 기반 추천 개선 (양/맛 선호도 학습)

### 커뮤니티 (라운지)
- [ ] REQ-023: 라운지 - 요리 사진/경험 공유 피드
- [ ] REQ-024: 라운지 게시물 좋아요/댓글/저장
- [ ] REQ-025: 레시피 댓글 기능 (팁, 후기 공유)
- [ ] REQ-026: 쇼츠 - 짧은 요리 영상 (15-60초)
- [ ] REQ-027: 크리에이터 팔로우 기능
- [ ] REQ-028: 서포터즈 프로그램 (n기 모집/운영)
- [ ] REQ-029: 활동 인센티브 (포인트/뱃지)

### 커머스 연동
- [ ] REQ-030: 레시피 내 재료 구매 링크
- [ ] REQ-031: 부족 재료 장바구니 담기
- [ ] REQ-032: 제휴 쇼핑몰 연동 (마켓컬리, 쿠팡 등)

### 가족 공유
- [ ] REQ-033: 가족 그룹 생성
- [ ] REQ-034: 초대 링크로 멤버 추가
- [ ] REQ-035: 실시간 재고 동기화

### 기타
- [ ] REQ-036: 회원가입/로그인 (소셜 로그인)
- [ ] REQ-037: 푸시 알림
- [ ] REQ-038: 식사 기록 히스토리 (캘린더 뷰)

## 레퍼런스 앱

| 앱 | 참고 포인트 |
|----|------------|
| 만개의레시피 | 댓글로 레시피 보완점 공유, 커뮤니티 활성화 |
| 마켓컬리 | 라운지 (요리 공유 공간), UI/UX |
| 오늘의집 | 서포터즈 n기 운영, 쇼츠 콘텐츠 |
| 넷플릭스 | 온보딩 시 취향 선택 UI |
| 인스타/틱톡 | 쇼츠 포맷, 크리에이터 생태계 |

## 기술 고려사항 (참고용)

> 이 섹션은 개발 단계에서 구체화됩니다.

| 기능 | 필요 기술 |
|------|----------|
| 영수증 OCR | Google Vision API / Naver Clova OCR |
| 레시피 추천 | OpenAI API / 자체 추천 알고리즘 |
| 음식 인식 | Google Vision API / 커스텀 모델 |
| 칼로리 DB | 식품의약품안전처 API / 자체 DB |
| 실시간 동기화 | Firebase / Supabase Realtime |
| 영양소 계산 | 자체 알고리즘 (TDEE 기반) |
| 쇼츠 영상 | AWS MediaConvert / Cloudflare Stream |
| 추천 시스템 | Collaborative Filtering / Content-based |
| 커머스 연동 | 제휴사 API / Affiliate 링크 |
