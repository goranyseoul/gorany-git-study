# QA 리포트

## 테스트 요약

| 항목 | 값 |
|------|-----|
| 테스트 일자 | 2026-02-02 |
| 총 테스트 케이스 | 80개 |
| 자동화 테스트 | 45개 |
| 통과 | 42개 (93%) |
| 실패 | 3개 (7%) |
| 커버리지 | 78% |

---

## 품질 게이트 결과

| 기준 | 목표 | 실제 | 상태 |
|------|------|------|------|
| 테스트 통과율 | 95% | 93% | ⚠️ |
| 코드 커버리지 | 80% | 78% | ⚠️ |
| Critical 버그 | 0개 | 1개 | ❌ |
| Major 버그 | 0개 | 1개 | ❌ |

**결과: 🔴 배포 불가 - 버그 수정 필요**

---

## 버그 목록

### Critical (즉시 수정)

| ID | 영역 | 설명 | 담당 |
|----|------|------|------|
| BUG-001 | Backend/Recipe | 요리 완료 시 단위 변환 없이 재고 차감하여 음수 발생 | @backend |

**상세 설명**:
- **재현 경로**: 레시피 상세 → 요리 완료 버튼
- **현상**: 레시피 재료 단위(g, ml)와 재고 단위(개, 팩)가 다를 때 잘못된 계산
- **영향**: 재고가 음수로 표시되거나 데이터 정합성 오류
- **수정 방안**:
  1. 단위 변환 테이블 구현
  2. 단위가 다르면 차감 스킵 또는 사용자 확인

---

### Major (배포 전 수정)

| ID | 영역 | 설명 | 담당 |
|----|------|------|------|
| BUG-002 | Backend/Inventory | 수량에 음수 입력 시 validation 없음 | @backend |

**상세 설명**:
- **재현 경로**: 재고 추가 → 수량에 -5 입력
- **현상**: 음수 수량으로 재고 생성됨
- **영향**: 데이터 무결성 위반
- **수정 방안**: DTO에 `@Min(0)` 데코레이터 추가

```typescript
// inventory/dto/index.ts
class CreateInventoryDto {
  @IsNumber()
  @Min(0, { message: '수량은 0 이상이어야 합니다' })
  quantity: number;
}
```

---

### Minor (다음 배포에 수정)

| ID | 영역 | 설명 | 담당 |
|----|------|------|------|
| BUG-003 | Frontend/Store | Optimistic update 실패 시 롤백 미구현 | @frontend |

**상세 설명**:
- **재현 경로**: 재고 소비 → 네트워크 끊김
- **현상**: UI는 업데이트됐는데 서버 반영 안 됨
- **영향**: UI와 서버 데이터 불일치 (새로고침으로 해결 가능)
- **수정 방안**: try-catch에서 실패 시 이전 상태로 복원

---

## 영역별 품질 평가

### Backend

| 모듈 | 안정성 | 테스트 커버리지 | 비고 |
|------|--------|-----------------|------|
| Auth | 🟢 양호 | 92% | 모든 테스트 통과 |
| Inventory | 🟡 주의 | 85% | validation 보강 필요 |
| Recipe | 🔴 위험 | 80% | 단위 변환 로직 필요 |
| Family | 🟢 양호 | 88% | 모든 테스트 통과 |
| Meal | 🟢 양호 | 75% | 커버리지 개선 권장 |
| Community | 🟢 양호 | 70% | 커버리지 개선 권장 |

### Frontend

| 영역 | 안정성 | 테스트 커버리지 | 비고 |
|------|--------|-----------------|------|
| 상태관리 | 🟡 주의 | 87% | 롤백 로직 보강 필요 |
| 컴포넌트 | 🟢 양호 | 95% | 우수 |
| 서비스 | 🟢 양호 | 80% | - |

---

## 피드백 결정

| 상황 | 결정 |
|------|------|
| ❌ Critical 버그 존재 | **개발팀 수정 필요** |
| ❌ Major 버그 존재 | **개발팀 수정 필요** |
| ⚠️ 커버리지 미달 | 권장 개선 |

---

## 다음 액션 (수정 필요)

### 1. Critical 버그 수정 (BUG-001)
```
@backend 레시피 요리 완료 시 단위 변환 로직 추가해줘

위치: server/src/modules/recipe/recipe.service.ts
문제: completeCooking() 에서 단위 변환 없이 차감
해결: 단위 변환 맵 구현 또는 동일 단위만 차감
```

### 2. Major 버그 수정 (BUG-002)
```
@backend 재고 수량 validation 추가해줘

위치: server/src/modules/inventory/dto/index.ts
문제: quantity에 음수 허용
해결: @Min(0) 데코레이터 추가
```

### 3. 재테스트
```
수정 완료 후: @testing 다시 테스트해줘
```

---

## 배포 승인 조건

- [ ] BUG-001 (Critical) 수정 완료
- [ ] BUG-002 (Major) 수정 완료
- [ ] 재테스트 통과 (Critical/Major 버그 0개)
- [ ] 테스트 통과율 95% 이상

---

## 히스토리

| 일자 | 버전 | 상태 | 비고 |
|------|------|------|------|
| 2026-02-02 | v1.0 | 🔴 실패 | Critical 1, Major 1 발견 |
| - | v1.1 | ⏳ 대기 | 버그 수정 후 재테스트 예정 |
